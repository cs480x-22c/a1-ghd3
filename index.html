<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CS480 A1</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <script src="script.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
  </head>
  <body>
    <div id="canvas">
      <svg width="78%" height="150" class="moon"></svg>
      <svg width="300" height="188" class="star"></svg>
      <svg width="100%" height="205" class="spaceship"></svg>
      <svg width="100%" height="140" class="cow"></svg>
    </div>
    <script>
      console.log(d3); // test if d3 is loaded

      var moonSvg = d3
        .select("svg.moon")
        .append("svg")
        .append("circle")
        .attr("height", 140)
        .attr("width", 140)
        .attr("cx", 80)
        .attr("cy", 80)
        .attr("r", 70)
        .style("fill", "#dfbc4b")
        .style("top", 10)
        .style("left", 10)
        .style("position", "absolute");

      var spaceship = d3.select("svg.spaceship").append("svg");
      spaceship
        .append("polygon")
        .attr("points", "200,10 250,200 80,210")
        .style("fill", "#dfbc4b")
        .append("ellipse")
        .attr("cx", 200)
        .attr("cy", 100)
        .attr("rx", 100)
        .attr("ry", 50)
        .style("fill", "#b9bae3")
        .style("stroke", "white")
        .style("stroke-width", 2);
      spaceship
        .append("ellipse")
        .attr("cx", 200)
        .attr("cy", 80)
        .attr("rx", 150)
        .attr("ry", 50)
        .style("fill", "#6a667f")
        .style("stroke", "white")
        .style("stroke-width", 2);
      spaceship
        .append("ellipse")
        .attr("cx", 200)
        .attr("cy", 50)
        .attr("rx", 100)
        .attr("ry", 45)
        .style("fill", "#5a5769")
        .style("stroke", "white")
        .style("stroke-width", 2);
      spaceship
        .append("circle")
        .attr("cx", 70)
        .attr("cy", 80)
        .attr("r", 6)
        .style("fill", "white");
      spaceship
        .append("circle")
        .attr("cx", 130)
        .attr("cy", 105)
        .attr("r", 6)
        .style("fill", "white");
      spaceship
        .append("circle")
        .attr("cx", 210)
        .attr("cy", 110)
        .attr("r", 6)
        .style("fill", "white");
      spaceship
        .append("circle")
        .attr("cx", 280)
        .attr("cy", 105)
        .attr("r", 6)
        .style("fill", "white");
      spaceship
        .append("circle")
        .attr("cx", 330)
        .attr("cy", 80)
        .attr("r", 6)
        .style("fill", "white");

      var cow = d3.select("svg.cow").append("svg");
      cow
        .append("rect")
        .attr("x", 50)
        .attr("y", 20)
        .attr("rx", 50)
        .attr("ry", 40)
        .attr("width", 150)
        .attr("height", 95)
        .style("fill", "white")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("circle")
        .attr("cx", 105)
        .attr("cy", 55)
        .attr("r", 25)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);
      cow
        .append("circle")
        .attr("cx", 175)
        .attr("cy", 80)
        .attr("r", 25)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);
      cow
        .append("circle")
        .attr("cx", 130)
        .attr("cy", 95)
        .attr("r", 10)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);
      cow
        .append("rect")
        .attr("x", 25)
        .attr("y", 10)
        .attr("rx", 20)
        .attr("ry", 30)
        .attr("width", 60)
        .attr("height", 95)
        .style("fill", "white")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("rect")
        .attr("x", 70)
        .attr("y", 100)
        .attr("rx", 10)
        .attr("ry", 10)
        .attr("width", 20)
        .attr("height", 40)
        .style("fill", "white")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("rect")
        .attr("x", 160)
        .attr("y", 100)
        .attr("rx", 10)
        .attr("ry", 10)
        .attr("width", 20)
        .attr("height", 40)
        .style("fill", "white")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("rect")
        .attr("x", 25)
        .attr("y", 75)
        .attr("rx", 80)
        .attr("ry", 30)
        .attr("width", 60)
        .attr("height", 35)
        .style("fill", "pink")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("rect")
        .attr("x", 25)
        .attr("y", 5)
        .attr("rx", 30)
        .attr("ry", 20)
        .attr("width", 10)
        .attr("height", 30)
        .style("fill", "#ba8b4c")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("rect")
        .attr("x", 70)
        .attr("y", 5)
        .attr("rx", 30)
        .attr("ry", 20)
        .attr("width", 10)
        .attr("height", 30)
        .style("fill", "#ba8b4c")
        .style("stroke", "black")
        .style("stroke-width", 5)
        .style("opacity", 1);
      cow
        .append("circle")
        .attr("cx", 40)
        .attr("cy", 50)
        .attr("r", 5)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);
      cow
        .append("circle")
        .attr("cx", 70)
        .attr("cy", 50)
        .attr("r", 5)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);
      cow
        .append("circle")
        .attr("cx", 40)
        .attr("cy", 95)
        .attr("r", 3)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);
      cow
        .append("circle")
        .attr("cx", 70)
        .attr("cy", 95)
        .attr("r", 3)
        .style("fill", "black")
        .style("stroke", "black")
        .style("stroke-width", 2);

      var starSVG = d3
        .select("svg.star")
        .append("svg")
        .append("polygon")
        .attr("points", "90,0 30,188 170,68 00,68 150,188")
        .style("stroke-length", 4)
        .style("fill-rule", "nonzero");

      function moveShips(duration) {
        spaceship
          .transition()
          .ease(d3.easeQuad)
          .on("start", function repeat() {
            d3.active(this)
              .attr("x", 40)
              .transition()
              .duration(duration)
              .attr("x", 920)
              .transition()
              .duration(duration)
              .attr("x", 40)
              .on("start", repeat);
          });
      }

      function cowStolen(duration) {
        cow
          .transition()
          .ease(d3.easeQuad)
          .on("start", function repeat() {
            d3.active(this)
              .attr("x", 40)
              .transition()
              .duration(duration)
              .attr("x", 920)
              .transition()
              .duration(duration)
              .attr("x", 40)
              .on("start", repeat);
          });
      }

      function twinkleStars(duration) {
        starSVG
          .transition()
          .ease(d3.easeQuad)
          .on("start", function repeat() {
            d3.active(this)
              .attr("fill", "#dfbc4b")
              .style("stroke", "#bf9a22")
              .transition()
              .duration(3000)
              .attr("fill", "#0e1e34")
              .style("stroke", "#0e1e34")
              .transition()
              .duration(3000)
              .on("start", repeat);
          });
      }

      twinkleStars(1000);
      moveShips(3000);
      cowStolen(3000);
    </script>
  </body>
</html>
