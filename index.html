<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v7.js"></script>

<!-- Create a button to trigger the transition -->
<button onclick="movingCircle()">Activate Circle</button>

<!-- Create a div with just a rect in svg -->
<div>
  <svg width="960px" height="400px">
      <circle
        id="circle" x="10" y="200"
        r=25 stroke="black"
        fill="#69b3a2" stroke-width="1"/>
  </svg>
</div>

<!-- Create a button to trigger the transition -->
<button onclick="rectAnimation()">Activate Rectangles</button>

<!-- Create a svg area-->
<svg id="rect_animation" width="400px" height="320px"></svg>


<!-- To Display the line chart, only use this svg and take out the above code except the D3 Source-->
<svg width="700" height="500"></svg>

<script>
  console.log(d3); // test if d3 is loaded
  // Add an SVG
  // Add Rectangles
  // Add Circles
  // Add Lines
  // Add Polygons

 

 
//This is a primitive for the Circle
function movingCircle(){

d3.select("circle")

  // First, make the bar wider
  .transition()
  .duration(2000)
  .attr("r", "100")
  
  // And now very small
  .transition()
  .duration(200)
  .attr("r", "10")

  // Second, higher
  .transition()
  .duration(400)
  .attr("r", "100")

  // Change its color
  .transition()
  .style("fill", "purple")
  .attr("cy", 200)
  .attr("cx", 525)
  var svg1 = d3.select("svg");
  var svg2 = d3.select("svg")
  svg1.append("circle")
       .attr("cx",100)
       .attr("cy", 100)
       .attr("r", 25)
       .attr("fill", "yellow")
       .transition()
      .duration(2000)
      .attr("r", "100")
      .transition()
      .duration(200)
      .attr("r", "300")

  
      .transition()
      .duration(400)
      .attr("r", "25")
  svg1.append("circle")
       .attr("cx",1000)
       .attr("cy", 100)
       .attr("r", 25)
       .attr("fill", "orange")
       .transition()
      .duration(2000)
      .attr("r", "600")
      .transition()
      .duration(200)
      .attr("r", "300")
      .attr("cx", 900)
      .attr("cy", 225)

  
      .transition()
      .duration(400)
      .attr("r", "25")
  
  
}



 //Rectangle Primitive
 var position = [50, 100, 150, 200, 250, 300, 350]
// Add circles at the top
d3.select("#rect_animation")
  .selectAll("myrectangles")
  .data(position)
  .enter()
  .append("rect")
    .attr("x",  function(d){return d})
    .attr("y", function(d){return d} )
    .attr("height", 100)
    .attr("width", 100)
function rectAnimation(){
  var svg3 = d3.select("svg")
  d3.selectAll("rect")
    .transition()
    .duration(2000)
    .attr("y", 30)
    .transition()
    .duration(2000)
    .attr("y", 300)
    .transition()
    .attr("y", 100)
    .transition()
    .attr("width", 100)
    .attr("height", 500)
    .transition()
    .attr("fill", "orange")
    .attr("x", 800)
    .attr("x", 200)
    .transition()
    .duration(2000)
    .attr("y", 300)
    .attr("fill", "blue")
    .attr("x", 50)
}

//This is a visualization of a line/curve chart with a green fill
var dataset1 = [
            [140,30], [80,20], [54,36],
            [32, 50], [40, 70], [50, 100],
            [35, 76], [65, 123], [73, 130],
            [78, 134], [73, 66], [79, 118],
            [200, 340], [300, 54], [350, 52], [250, 35], [500, 300]
        ];


var svg = d3.select("svg"),
  margin = 200,
  width = svg.attr("width") - margin,
  height = svg.attr("height") - margin

var xScale = d3.scaleLinear().domain([0, 400]).range([0, width]),
  yScale = d3.scaleLinear().domain([0, 400]).range([height, 0]);

svg.append('text')
    .attr('x', width/2 + 100)
    .attr('y', 100)
    .attr('text-anchor', 'middle')
    .text('D3 Line Chart');
        
        // X label
svg.append('text')
  .attr('x', width/2 + 100)
  .attr('y', height - 15 + 150)
  .attr('text-anchor', 'middle')
  .text('Indepedent  Variable');
        
        // Y label
  svg.append('text')
    .attr('text-anchor', 'middle')
    .attr('transform', 'translate(60,' + height + ')rotate(-90)')
    .text('Dependent Variable');

  
  svg.append('g')
        .selectAll("dot")
        .data(dataset1)
        .enter()
        .append("circle")
        .attr("cx", function (d) { return xScale(d[0]); } )
        .attr("cy", function (d) { return yScale(d[1]); } )
        .attr("r", 2)
        .attr("transform", "translate(" + 100 + "," + 100 + ")")
        .style("fill", "green");

  var line = d3.line()
    .x(function(d) { return xScale(d[0]); }) 
    .y(function(d) { return yScale(d[1]); }) 
    .curve(d3.curveMonotoneX)
        
  svg.append("path")
    .datum(dataset1) 
    .attr("class", "line") 
    .attr("transform", "translate(" + 100 + "," + 100 + ")")
    .attr("d", line)
    .style("fill", "green")
    .style("stroke", "purple")
    .style("stroke-width", "6.3");


    var vis = d3.select("body").append("svg")
         .attr("width", 1000)
         .attr("height", 667)
    // create svg element
    var svg2 = d3.select("svg").attr("width", 1000).attr("height", 400)



    // This is an arc that changes colors
svg2
  .append("path")
  .attr("transform", "translate(875, 175)")
  .attr("d", d3.arc()
    .innerRadius( 100 )
    .outerRadius( 150 )
    .startAngle( 100.14 )     // It's in radian, so Pi = 3.14 = bottom.
    .endAngle( 200.28 )       // 2*Pi = 6.28 = top
    )
  .attr('stroke', 'black')
  .attr('fill', '#69b3a2')
  .transition()
  .duration(900)
  
    .attr("fill", "orange")
    .transition()
    .duration(900)
    .attr("fill", "purple")


    scaleX = d3.scaleLinear()
        .domain([-30,30])
        .range([0,600]),
scaleY = d3.scaleLinear()
        .domain([0,50])
        .range([500,0]),
poly = [{"x":0.0, "y":25.0},
        {"x":8.5,"y":23.4},
        {"x":13.0,"y":21.0},
        {"x":19.0,"y":15.5}];
polyData1 = [{"x":3.0, "y":28.0},
        {"x":11.5,"y":27.4},
        {"x":17.0,"y":31.0},
        {"x":26.0,"y":31.5}];

//This is a visualization of a polygon that changes colors
vis.selectAll("polygon")
    .data([poly])
  .enter().append("polygon")
    .attr("points",function(d) {
        return d.map(function(d) { return [scaleX(d.x),scaleY(d.y)].join(","); }).join(" ");})
    .attr("stroke","black")
    .attr("stroke-width",2)
    .transition()
    .attr("y", 30)
    .transition()
    .duration(900)
    .attr("y", 300)
    .transition()
    .attr("y", 100)
    .transition()
    .attr("width", 100)
    .attr("height", 500)
    .transition()
    .attr("fill", "orange")
    .attr("x", 800)
    .attr("x", 200)
    .transition()
    .duration(900)
    .attr("y", 300)
    .attr("fill", "blue")
    .attr("x", 50)
    .transition()
    .duration(900)
    .attr("y", 500)
    .attr("fill", "pink")
    .attr("x", 50)
    vis1.selectAll("polygon")
    .data([polyData1])
  .enter().append("polygon")
    .attr("points",function(d) {
        return d.map(function(d) { return [scaleX(d.x),scaleY(d.y)].join(","); }).join(" ");})
    .attr("stroke","black")
    .attr("stroke-width",2)
    .transition()
    .attr("y", 30)
    .transition()
    .duration(900)
    .attr("y", 300)
    .transition()
    .attr("y", 100)
    .transition()
    .attr("width", 100)
    .attr("height", 500)
    .transition()
    .attr("fill", "orange")
    .attr("x", 800)
    .attr("x", 200)
    .transition()
    .duration(900)
    .attr("y", 300)
    .attr("fill", "blue")
 
</script>
