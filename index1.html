<!-- 
    - Marie Tessier
    - CS480X: Data Visualization
    - HW1  
-->

<html>
    <head>
        <script src="https://d3js.org/d3.v6.min.js"></script>
    </head>
    <body>
        <script>
            console.log(d3); // test if d3 is loaded
            // Add an SVG
            var svg = d3.select("body")
             .append("svg")
             .attr("style", "outline: solid purple;") 
             .attr("width", 500)
             .attr("height", 500);
             
            //add text directions
            d3.select('svg')
                .append('text')
                .attr('x',225)
                .attr('y',20)
                .text("Place the shapes in the box.");

            // Add Rectangles
            var rFill = "pink";
            var rectangle = d3.select('svg')
                .append('rect')
                .attr('x', 20)
                .attr('y', 3)
                .attr('width', 50)
                .attr('height', 50)
                .attr('fill', 'pink')
                .on('mouseover', function(){
                    if(rFill != 'yellow') {
                        d3.select(this).attr('fill',"red");
                    };
                })
                .on('mouseout', function(){
                    if(rFill != 'yellow') {
                        d3.select(this).attr('fill',"pink");
                    };
                })
                .on('click', function(i,d){
                    rFill = rFill == "pink" ? "yellow" : "pink";
                    d3.select(this).attr('fill',rFill);
                });
            
            // Add Circles
            var cFill = "blue";
            var circle = d3.select('svg')
                .append('circle')
                .attr('cx', 150)
                .attr('cy', 30)
                .attr('r', 30)
                .attr('fill', 'blue')
                .on('mouseover', function(){
                    if(cFill != 'yellow') {
                        d3.select(this).attr('fill',"steelblue");
                    };
                })
                .on('mouseout', function(){
                    if(cFill != 'yellow') {
                        d3.select(this).attr('fill',"blue");
                    };
                })
                .on('click', function(i,d){
                    cFill = cFill == "blue" ? "yellow" : "blue";
                    d3.select(this).attr('fill',cFill);
                });

            //drag and drop function for circles
            var drag_circle = d3.drag()
                .on("drag", function(d) {
                    if(event.x < 400 && event.x > 200 
                        && event.y > 430 && event.y < 500){
                            console.log("we in here??");
                            alert("Congratulations! The circle was placed in the box!");
                            d3.select('circle') 
                                .attr("cx", 350 )
                                .attr("cy", 440 );
                            d3.select(this).attr('fill',"blue");
                        }
                    else{
                        d3.select('circle') 
                        .attr("cx", event.x )
                        .attr("cy", event.y );
                    }     
            }); 
            //apply the drag_handler to our circles 
            drag_circle(circle);
            
            //drag and drop for rectangle 
            var drag_rect = d3.drag()
                .on("drag", function(d) { 
                    if(event.x < 400 && event.x > 200 
                        && event.y > 430 && event.y < 500){
                            alert("Congratulations! The rectangle was placed in the box!");
                            d3.selectAll('rect') 
                                .attr("x", 220 )
                                .attr("y", 420 );
                            d3.select(this).attr('fill',"pink");
                        }
                    else{
                        d3.selectAll('rect') 
                        .attr("x", event.x )
                        .attr("y", event.y );
                    };
            }); 
            //apply the drag_handler to our circles 
            drag_rect(rectangle);         
                
            // Add Lines 
            var lines = d3.select('svg')
                .append('line')
                .style('stroke', 'black')
                .style("stroke-width",20)
                .attr("x1", 200)
                .attr('y1', 490)
                .attr("x2", 400)
                .attr("y2", 490);

            var lines = d3.select('svg')
                .append('line')
                .style('stroke', 'black')
                .style("stroke-width",20)
                .attr("x1", 200)
                .attr('y1', 430)
                .attr("x2", 200)
                .attr("y2", 500);
            
            var lines = d3.select('svg')
                .append('line')
                .style('stroke', 'black')
                .style("stroke-width",20)
                .attr("x1", 400)
                .attr('y1', 430)
                .attr("x2", 400)
                .attr("y2", 500);
            
        </script>
    </body>
</html>